(self.webpackChunkminiredmine_spa=self.webpackChunkminiredmine_spa||[]).push([[179],{8949:(t,e,n)=>{"use strict";var s=n(1379),o=n(400),i=n(5120);const r="REDMINE_USER";const a=function(){var t;const e=null!==(t=localStorage.getItem(r))&&void 0!==t?t:JSON.stringify({unauthorized:!0}),n=JSON.parse(e),{subscribe:s,set:o,update:a}=(0,i.fZ)(n);return{subscribe:s,register:t=>a((()=>(localStorage.setItem(r,JSON.stringify(t)),t)))}}();function l(t){let e,n,o,i,r,a,l,c,u,d,f,h,m,b,p,L;return{c(){e=(0,s.bG)("li"),n=(0,s.bG)("a"),n.textContent="Profile",o=(0,s.Dh)(),i=(0,s.bG)("li"),r=(0,s.bG)("a"),r.textContent="Issues",a=(0,s.Dh)(),l=(0,s.bG)("li"),c=(0,s.bG)("a"),c.textContent="Templates",u=(0,s.Dh)(),d=(0,s.bG)("li"),f=(0,s.bG)("a"),f.textContent="Time Entries",h=(0,s.Dh)(),m=(0,s.bG)("li"),b=(0,s.bG)("a"),b.textContent="Report",(0,s.Lj)(n,"class","nav-link"),(0,s.Lj)(n,"href","/profile"),(0,s.Lj)(e,"class","nav-item"),(0,s.Lj)(r,"class","nav-link"),(0,s.Lj)(r,"href","/issues"),(0,s.Lj)(i,"class","nav-item"),(0,s.Lj)(c,"class","nav-link"),(0,s.Lj)(c,"href","/templates"),(0,s.Lj)(l,"class","nav-item"),(0,s.Lj)(f,"class","nav-link"),(0,s.Lj)(f,"href","/timeentries"),(0,s.Lj)(d,"class","nav-item"),(0,s.Lj)(b,"class","nav-link"),(0,s.Lj)(b,"href","/report"),(0,s.Lj)(m,"class","nav-item")},m(R,v){(0,s.$T)(R,e,v),(0,s.R3)(e,n),(0,s.$T)(R,o,v),(0,s.$T)(R,i,v),(0,s.R3)(i,r),(0,s.$T)(R,a,v),(0,s.$T)(R,l,v),(0,s.R3)(l,c),(0,s.$T)(R,u,v),(0,s.$T)(R,d,v),(0,s.R3)(d,f),(0,s.$T)(R,h,v),(0,s.$T)(R,m,v),(0,s.R3)(m,b),p||(L=[(0,s.oL)(n,"click",t[4]),(0,s.oL)(r,"click",t[5]),(0,s.oL)(c,"click",t[6]),(0,s.oL)(f,"click",t[7]),(0,s.oL)(b,"click",t[8])],p=!0)},p:s.ZT,d(t){t&&(0,s.og)(e),t&&(0,s.og)(o),t&&(0,s.og)(i),t&&(0,s.og)(a),t&&(0,s.og)(l),t&&(0,s.og)(u),t&&(0,s.og)(d),t&&(0,s.og)(h),t&&(0,s.og)(m),p=!1,(0,s.j7)(L)}}}function c(t){let e,n,o,i;return{c(){e=(0,s.bG)("li"),n=(0,s.bG)("a"),n.textContent="Login",(0,s.Lj)(n,"class","nav-link"),(0,s.Lj)(n,"href","/login"),(0,s.Lj)(e,"class","nav-item")},m(r,a){(0,s.$T)(r,e,a),(0,s.R3)(e,n),o||(i=(0,s.oL)(n,"click",t[3]),o=!0)},p:s.ZT,d(t){t&&(0,s.og)(e),o=!1,i()}}}function u(t){let e,n,o,i,r,a,u,d,f;function h(t,e){return!0===t[1].unauthorized?c:l}let m=h(t),b=m(t);return{c(){e=(0,s.bG)("nav"),n=(0,s.bG)("a"),n.textContent="Mini Redmine 2",o=(0,s.Dh)(),i=(0,s.bG)("button"),i.innerHTML='<span class="navbar-toggler-icon"></span>',r=(0,s.Dh)(),a=(0,s.bG)("div"),u=(0,s.bG)("ul"),b.c(),(0,s.Lj)(n,"class","navbar-brand"),(0,s.Lj)(n,"href","/"),(0,s.Lj)(i,"class","navbar-toggler"),(0,s.Lj)(i,"type","button"),(0,s.Lj)(i,"data-toggle","collapse"),(0,s.Lj)(i,"data-target","#mainnavbar"),(0,s.Lj)(i,"aria-controls","mainnavbar"),(0,s.Lj)(i,"aria-expanded","false"),(0,s.Lj)(i,"aria-label","Toggle navigation"),(0,s.Lj)(u,"class","navbar-nav mr-auto"),(0,s.Lj)(a,"class","collapse navbar-collapse"),(0,s.Lj)(a,"id","mainnavbar"),(0,s.Lj)(e,"class","navbar navbar-expand-lg navbar-dark bg-primary mb-3")},m(l,c){(0,s.$T)(l,e,c),(0,s.R3)(e,n),(0,s.R3)(e,o),(0,s.R3)(e,i),(0,s.R3)(e,r),(0,s.R3)(e,a),(0,s.R3)(a,u),b.m(u,null),d||(f=(0,s.oL)(n,"click",t[2]),d=!0)},p(t,[e]){m===(m=h(t))&&b?b.p(t,e):(b.d(1),b=m(t),b&&(b.c(),b.m(u,null)))},i:s.ZT,o:s.ZT,d(t){t&&(0,s.og)(e),b.d(),d=!1,f()}}}function d(t,e,n){let o;(0,s.FI)(t,a,(t=>n(1,o=t)));let{handleNavigation:i}=e;return t.$$set=t=>{"handleNavigation"in t&&n(0,i=t.handleNavigation)},[i,o,t=>i(t,"/"),t=>i(t,"/login"),t=>i(t,"/profile"),t=>i(t,"/issues"),t=>i(t,"/templates"),t=>i(t,"/timeentries"),t=>i(t,"/report")]}class f extends s.f_{constructor(t){super(),(0,s.S1)(this,t,d,u,s.N8,{handleNavigation:0})}}const h=f;function m(t){let e,n,o,i,r=t[0].firstname+"";return{c(){e=(0,s.bG)("p"),n=(0,s.fL)("Welcome "),o=(0,s.fL)(r),i=(0,s.fL)("."),(0,s.Lj)(e,"class","lead")},m(t,r){(0,s.$T)(t,e,r),(0,s.R3)(e,n),(0,s.R3)(e,o),(0,s.R3)(e,i)},p(t,e){1&e&&r!==(r=t[0].firstname+"")&&(0,s.rT)(o,r)},d(t){t&&(0,s.og)(e)}}}function b(t){let e;return{c(){e=(0,s.bG)("p"),e.textContent="Welcome you need to register your user info to use the app.",(0,s.Lj)(e,"class","lead")},m(t,n){(0,s.$T)(t,e,n)},p:s.ZT,d(t){t&&(0,s.og)(e)}}}function p(t){let e,n,o;function i(t,e){return!0===t[0].unauthorized?b:m}let r=i(t),a=r(t);return{c(){e=(0,s.bG)("div"),n=(0,s.bG)("h1"),n.textContent="MiniRedmine, Svelte!",o=(0,s.Dh)(),a.c(),(0,s.Lj)(n,"class","display-3"),(0,s.Lj)(e,"class","jumbotron")},m(t,i){(0,s.$T)(t,e,i),(0,s.R3)(e,n),(0,s.R3)(e,o),a.m(e,null)},p(t,[n]){r===(r=i(t))&&a?a.p(t,n):(a.d(1),a=r(t),a&&(a.c(),a.m(e,null)))},i:s.ZT,o:s.ZT,d(t){t&&(0,s.og)(e),a.d()}}}function L(t,e,n){let o;return(0,s.FI)(t,a,(t=>n(0,o=t))),[o]}class R extends s.f_{constructor(t){super(),(0,s.S1)(this,t,L,p,s.N8,{})}}const v=R;function g(t){let e,n,o,i,r,a,l,c,u,d,f,h,m;return{c(){e=(0,s.bG)("div"),n=(0,s.bG)("div"),o=(0,s.bG)("div"),i=(0,s.bG)("form"),r=(0,s.bG)("h1"),r.textContent="Please input your Redmine Api Key",a=(0,s.Dh)(),l=(0,s.bG)("label"),l.textContent="Api Key",c=(0,s.Dh)(),u=(0,s.bG)("input"),d=(0,s.Dh)(),f=(0,s.bG)("button"),f.textContent="Login",(0,s.Lj)(r,"class","h3 mb-3 font-weight-normal"),(0,s.Lj)(l,"for","inputApiKey"),(0,s.Lj)(l,"class","sr-only"),(0,s.Lj)(u,"type","text"),(0,s.Lj)(u,"id","inputApiKey"),(0,s.Lj)(u,"class","form-control"),(0,s.Lj)(u,"placeholder","Redmine Api Key"),u.required=!0,(0,s.Lj)(f,"class","btn btn-lg btn-primary btn-block"),(0,s.Lj)(f,"type","submit"),(0,s.Lj)(o,"class","col"),(0,s.Lj)(n,"class","row"),(0,s.Lj)(e,"class","container")},m(b,p){(0,s.$T)(b,e,p),(0,s.R3)(e,n),(0,s.R3)(n,o),(0,s.R3)(o,i),(0,s.R3)(i,r),(0,s.R3)(i,a),(0,s.R3)(i,l),(0,s.R3)(i,c),(0,s.R3)(i,u),(0,s.Bm)(u,t[0]),(0,s.R3)(i,d),(0,s.R3)(i,f),h||(m=[(0,s.oL)(u,"input",t[3]),(0,s.oL)(i,"submit",t[1])],h=!0)},p(t,[e]){1&e&&u.value!==t[0]&&(0,s.Bm)(u,t[0])},i:s.ZT,o:s.ZT,d(t){t&&(0,s.og)(e),h=!1,(0,s.j7)(m)}}}function j(t,e,n){var s=this&&this.__awaiter||function(t,e,n,s){return new(n||(n=Promise))((function(o,i){function r(t){try{l(s.next(t))}catch(t){i(t)}}function a(t){try{l(s.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,a)}l((s=s.apply(t,e||[])).next())}))};let o,{handleNavigation:i}=e;return t.$$set=t=>{"handleNavigation"in t&&n(2,i=t.handleNavigation)},[o,function(t){return s(this,void 0,void 0,(function*(){t.preventDefault();const e=yield fetch(`api/redmine/userinfo?userApiKey=${o}`);a.register(yield e.json()),i(null,"/")}))},i,function(){o=this.value,n(0,o)}]}class y extends s.f_{constructor(t){super(),(0,s.S1)(this,t,j,g,s.N8,{handleNavigation:2})}}const G=y;var T=n(7955),$=n(3855);function D(t){let e,n,o,i,r,a,l,c,u,d,f,h,m,b,p,L,R,v,g,j,y,G,T,$,D,_,C,w=t[0].firstname+"",x=t[0].lastname+"",k=t[0].login+"",S=t[0].id+"";return{c(){e=(0,s.bG)("div"),n=(0,s.bG)("div"),o=(0,s.bG)("div"),i=(0,s.bG)("div"),r=(0,s.bG)("div"),a=(0,s.bG)("div"),l=(0,s.bG)("div"),c=(0,s.bG)("h2"),u=(0,s.fL)("Name: "),d=(0,s.fL)(w),f=(0,s.Dh)(),h=(0,s.fL)(x),m=(0,s.Dh)(),b=(0,s.bG)("p"),p=(0,s.bG)("strong"),p.textContent="Login:",L=(0,s.Dh)(),R=(0,s.fL)(k),v=(0,s.Dh)(),g=(0,s.bG)("p"),j=(0,s.bG)("strong"),j.textContent="Last login:",y=(0,s.Dh)(),G=(0,s.fL)(t[1]),T=(0,s.Dh)(),$=(0,s.bG)("p"),D=(0,s.bG)("strong"),D.textContent="Id:",_=(0,s.Dh)(),C=(0,s.fL)(S),(0,s.Lj)(c,"class","card-title"),(0,s.Lj)(b,"class","card-text"),(0,s.Lj)(g,"class","card-text"),(0,s.Lj)($,"class","card-text"),(0,s.Lj)(l,"class","col-md-8 col-sm-8"),(0,s.Lj)(a,"class","row"),(0,s.Lj)(r,"class","card-block"),(0,s.Lj)(i,"class","card card-inverse"),(0,s.Lj)(o,"class","col-12"),(0,s.Lj)(n,"class","row"),(0,s.Lj)(e,"class","container-fluid")},m(t,w){(0,s.$T)(t,e,w),(0,s.R3)(e,n),(0,s.R3)(n,o),(0,s.R3)(o,i),(0,s.R3)(i,r),(0,s.R3)(r,a),(0,s.R3)(a,l),(0,s.R3)(l,c),(0,s.R3)(c,u),(0,s.R3)(c,d),(0,s.R3)(c,f),(0,s.R3)(c,h),(0,s.R3)(l,m),(0,s.R3)(l,b),(0,s.R3)(b,p),(0,s.R3)(b,L),(0,s.R3)(b,R),(0,s.R3)(l,v),(0,s.R3)(l,g),(0,s.R3)(g,j),(0,s.R3)(g,y),(0,s.R3)(g,G),(0,s.R3)(l,T),(0,s.R3)(l,$),(0,s.R3)($,D),(0,s.R3)($,_),(0,s.R3)($,C)},p(t,[e]){1&e&&w!==(w=t[0].firstname+"")&&(0,s.rT)(d,w),1&e&&x!==(x=t[0].lastname+"")&&(0,s.rT)(h,x),1&e&&k!==(k=t[0].login+"")&&(0,s.rT)(R,k),1&e&&S!==(S=t[0].id+"")&&(0,s.rT)(C,S)},i:s.ZT,o:s.ZT,d(t){t&&(0,s.og)(e)}}}function _(t,e,n){let o;(0,s.FI)(t,a,(t=>n(0,o=t)));const i=(0,T.Z)((0,$.Z)(o.last_login_on),"yyyy-MMM-dd HH:mm");return[o,i]}class C extends s.f_{constructor(t){super(),(0,s.S1)(this,t,_,D,s.N8,{})}}const w=C,x="REDMINE_USER_ISSUES";const k=function(){var t;const e=null!==(t=localStorage.getItem(x))&&void 0!==t?t:"[]",n=JSON.parse(e),{subscribe:s,set:o,update:r}=(0,i.fZ)(n);return{subscribe:s,updateIssues:t=>r((()=>(localStorage.setItem(x,JSON.stringify(t)),t)))}}();function S(t,e,n){const s=t.slice();return s[8]=e[n],s}function I(t,e){let n,o,i,r,a,l,c,u,d,f,h,m,b,p,L,R=e[8].id+"",v=e[8].project.name+"",g=e[8].subject+"";function j(...t){return e[5](e[8],...t)}return{key:t,first:null,c(){n=(0,s.bG)("tr"),o=(0,s.bG)("td"),i=(0,s.fL)(R),r=(0,s.Dh)(),a=(0,s.bG)("td"),l=(0,s.fL)(v),c=(0,s.Dh)(),u=(0,s.bG)("td"),d=(0,s.fL)(g),f=(0,s.Dh)(),h=(0,s.bG)("td"),m=(0,s.bG)("button"),m.innerHTML='<i class="fas fa-trash"></i>',b=(0,s.Dh)(),(0,s.Lj)(m,"type","button"),(0,s.Lj)(m,"class","btn btn-sm btn-danger"),this.first=n},m(t,e){(0,s.$T)(t,n,e),(0,s.R3)(n,o),(0,s.R3)(o,i),(0,s.R3)(n,r),(0,s.R3)(n,a),(0,s.R3)(a,l),(0,s.R3)(n,c),(0,s.R3)(n,u),(0,s.R3)(u,d),(0,s.R3)(n,f),(0,s.R3)(n,h),(0,s.R3)(h,m),(0,s.R3)(n,b),p||(L=(0,s.oL)(m,"click",j),p=!0)},p(t,n){e=t,2&n&&R!==(R=e[8].id+"")&&(0,s.rT)(i,R),2&n&&v!==(v=e[8].project.name+"")&&(0,s.rT)(l,v),2&n&&g!==(g=e[8].subject+"")&&(0,s.rT)(d,g)},d(t){t&&(0,s.og)(n),p=!1,L()}}}function M(t){let e,n,o,i,r,a,l,c,u,d,f,h,m,b,p,L=[],R=new Map,v=t[1];const g=t=>t[8].id;for(let e=0;e<v.length;e+=1){let n=S(t,v,e),s=g(n);R.set(s,L[e]=I(s,n))}return{c(){e=(0,s.bG)("div"),n=(0,s.bG)("div"),o=(0,s.bG)("div"),i=(0,s.bG)("form"),r=(0,s.bG)("input"),a=(0,s.Dh)(),l=(0,s.bG)("button"),l.innerHTML='<i class="fas fa-plus-circle"></i>',c=(0,s.Dh)(),u=(0,s.bG)("div"),d=(0,s.bG)("table"),f=(0,s.bG)("thead"),f.innerHTML="<tr><th>Issue</th> \n            <th>Project</th> \n            <th>Subject</th> \n            <th></th></tr>",h=(0,s.Dh)(),m=(0,s.bG)("tbody");for(let t=0;t<L.length;t+=1)L[t].c();(0,s.Lj)(r,"type","number"),(0,s.Lj)(r,"min","1"),(0,s.Lj)(r,"max","9999999"),(0,s.Lj)(r,"class","form-control"),(0,s.Lj)(l,"type","submit"),(0,s.Lj)(l,"class","btn btn-sm btn-success"),(0,s.Lj)(o,"class","col-2"),(0,s.Lj)(d,"class","table table-striped"),(0,s.Lj)(u,"class","col-8"),(0,s.Lj)(n,"class","row"),(0,s.Lj)(e,"class","container")},m(R,v){(0,s.$T)(R,e,v),(0,s.R3)(e,n),(0,s.R3)(n,o),(0,s.R3)(o,i),(0,s.R3)(i,r),(0,s.Bm)(r,t[0]),(0,s.R3)(i,a),(0,s.R3)(i,l),(0,s.R3)(n,c),(0,s.R3)(n,u),(0,s.R3)(u,d),(0,s.R3)(d,f),(0,s.R3)(d,h),(0,s.R3)(d,m);for(let t=0;t<L.length;t+=1)L[t].m(m,null);b||(p=[(0,s.oL)(r,"input",t[4]),(0,s.oL)(i,"submit",t[2])],b=!0)},p(t,[e]){1&e&&(0,s.sC)(r.value)!==t[0]&&(0,s.Bm)(r,t[0]),10&e&&(v=t[1],L=(0,s.GQ)(L,e,g,1,t,v,R,m,s.OC,I,null,S))},i:s.ZT,o:s.ZT,d(t){t&&(0,s.og)(e);for(let t=0;t<L.length;t+=1)L[t].d();b=!1,(0,s.j7)(p)}}}function Z(t,e,n){let o,i;(0,s.FI)(t,k,(t=>n(1,o=t))),(0,s.FI)(t,a,(t=>n(6,i=t)));var r=this&&this.__awaiter||function(t,e,n,s){return new(n||(n=Promise))((function(o,i){function r(t){try{l(s.next(t))}catch(t){i(t)}}function a(t){try{l(s.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,a)}l((s=s.apply(t,e||[])).next())}))};function l(t,e){t.preventDefault();let n=-1,s=Array.from(o);for(let t=0;t<s.length;t++){s[t].id===e&&(n=t)}n>=0&&(s.splice(n,1),k.updateIssues(s))}let c=0;return[c,o,function(t){return r(this,void 0,void 0,(function*(){t.preventDefault();let e=!1,n=Array.from(o);for(let t=0;t<n.length;t++){n[t].id===c&&(e=!0)}if(!1===e){const t=yield fetch(`api/redmine/issue/${c}?userApiKey=${i.api_key}`);!0===t.ok&&(n.push(yield t.json()),k.updateIssues(n))}}))},l,function(){c=(0,s.sC)(this.value),n(0,c)},(t,e)=>l(e,t.id)]}class N extends s.f_{constructor(t){super(),(0,s.S1)(this,t,Z,M,s.N8,{})}}const A=N,H="REDMINE_USER_TEMPLATES";const E=function(){var t;const e=null!==(t=localStorage.getItem(H))&&void 0!==t?t:"[]",n=JSON.parse(e),{subscribe:s,set:o,update:r}=(0,i.fZ)(n);return{subscribe:s,updateTemplates:t=>r((()=>(localStorage.setItem(H,JSON.stringify(t)),t)))}}(),F="REDMINE_ACTIVITIES";const O=function(){var t;const e=null!==(t=sessionStorage.getItem(F))&&void 0!==t?t:"[]",n=JSON.parse(e),{subscribe:s,set:o,update:r}=(0,i.fZ)(n);return{subscribe:s,updateActivities:t=>r((()=>(sessionStorage.setItem(F,JSON.stringify(t)),t)))}}();function P(t,e,n){const s=t.slice();return s[15]=e[n],s}function U(t,e,n){const s=t.slice();return s[18]=e[n],s}function Y(t,e,n){const s=t.slice();return s[21]=e[n],s}function W(t,e){let n,o,i,r,a,l,c,u=e[21].id+"",d=e[21].project.name+"",f=e[21].subject+"";return{key:t,first:null,c(){n=(0,s.bG)("option"),o=(0,s.fL)(u),i=(0,s.fL)(" - "),r=(0,s.fL)(d),a=(0,s.fL)(" - "),l=(0,s.fL)(f),n.__value=c=e[21].id,n.value=n.__value,this.first=n},m(t,e){(0,s.$T)(t,n,e),(0,s.R3)(n,o),(0,s.R3)(n,i),(0,s.R3)(n,r),(0,s.R3)(n,a),(0,s.R3)(n,l)},p(t,i){e=t,8&i&&u!==(u=e[21].id+"")&&(0,s.rT)(o,u),8&i&&d!==(d=e[21].project.name+"")&&(0,s.rT)(r,d),8&i&&f!==(f=e[21].subject+"")&&(0,s.rT)(l,f),8&i&&c!==(c=e[21].id)&&(n.__value=c,n.value=n.__value)},d(t){t&&(0,s.og)(n)}}}function z(t,e){let n,o,i,r=e[18].name+"";return{key:t,first:null,c(){n=(0,s.bG)("option"),o=(0,s.fL)(r),n.__value=i=e[18].id,n.value=n.__value,this.first=n},m(t,e){(0,s.$T)(t,n,e),(0,s.R3)(n,o)},p(t,a){e=t,4&a&&r!==(r=e[18].name+"")&&(0,s.rT)(o,r),4&a&&i!==(i=e[18].id)&&(n.__value=i,n.value=n.__value)},d(t){t&&(0,s.og)(n)}}}function B(t,e){let n,o,i,r,a,l,c,u,d,f,h,m,b,p,L,R,v,g,j=e[7](e[15].issue)+"",y=e[6](e[15].activity)+"",G=e[15].comments+"",T=e[15].hours+"";function $(...t){return e[12](e[15],...t)}return{key:t,first:null,c(){n=(0,s.bG)("tr"),o=(0,s.bG)("td"),i=(0,s.fL)(j),r=(0,s.Dh)(),a=(0,s.bG)("td"),l=(0,s.fL)(y),c=(0,s.Dh)(),u=(0,s.bG)("td"),d=(0,s.fL)(G),f=(0,s.Dh)(),h=(0,s.bG)("td"),m=(0,s.fL)(T),b=(0,s.Dh)(),p=(0,s.bG)("td"),L=(0,s.bG)("button"),L.innerHTML='<i class="fas fa-trash"></i>',R=(0,s.Dh)(),(0,s.Lj)(L,"type","button"),(0,s.Lj)(L,"class","btn btn-sm btn-danger"),this.first=n},m(t,e){(0,s.$T)(t,n,e),(0,s.R3)(n,o),(0,s.R3)(o,i),(0,s.R3)(n,r),(0,s.R3)(n,a),(0,s.R3)(a,l),(0,s.R3)(n,c),(0,s.R3)(n,u),(0,s.R3)(u,d),(0,s.R3)(n,f),(0,s.R3)(n,h),(0,s.R3)(h,m),(0,s.R3)(n,b),(0,s.R3)(n,p),(0,s.R3)(p,L),(0,s.R3)(n,R),v||(g=(0,s.oL)(L,"click",$),v=!0)},p(t,n){e=t,2&n&&j!==(j=e[7](e[15].issue)+"")&&(0,s.rT)(i,j),2&n&&y!==(y=e[6](e[15].activity)+"")&&(0,s.rT)(l,y),2&n&&G!==(G=e[15].comments+"")&&(0,s.rT)(d,G),2&n&&T!==(T=e[15].hours+"")&&(0,s.rT)(m,T)},d(t){t&&(0,s.og)(n),v=!1,g()}}}function K(t){let e,n,o,i,r,a,l,c,u,d,f,h,m,b,p,L,R,v,g,j,y,G,T,$,D,_,C,w,x,k,S,I,M,Z,N,A,H,E,F,O,K=[],J=new Map,q=[],V=new Map,X=t[1].reduce(Q,0)+"",tt=[],et=new Map,nt=t[3];const st=t=>t[21].id;for(let e=0;e<nt.length;e+=1){let n=Y(t,nt,e),s=st(n);J.set(s,K[e]=W(s,n))}let ot=t[2];const it=t=>t[18].id;for(let e=0;e<ot.length;e+=1){let n=U(t,ot,e),s=it(n);V.set(s,q[e]=z(s,n))}let rt=t[1];const at=t=>t[15].id;for(let e=0;e<rt.length;e+=1){let n=P(t,rt,e),s=at(n);et.set(s,tt[e]=B(s,n))}return{c(){e=(0,s.bG)("div"),n=(0,s.bG)("div"),o=(0,s.bG)("div"),i=(0,s.bG)("form"),r=(0,s.bG)("div"),a=(0,s.bG)("label"),a.textContent="Issue",l=(0,s.Dh)(),c=(0,s.bG)("select"),u=(0,s.bG)("option"),u.textContent="--Select an issue--";for(let t=0;t<K.length;t+=1)K[t].c();d=(0,s.Dh)(),f=(0,s.bG)("div"),h=(0,s.bG)("label"),h.textContent="Activity",m=(0,s.Dh)(),b=(0,s.bG)("select"),p=(0,s.bG)("option"),p.textContent="--Select an activity--";for(let t=0;t<q.length;t+=1)q[t].c();L=(0,s.Dh)(),R=(0,s.bG)("div"),v=(0,s.bG)("label"),v.textContent="Comments",g=(0,s.Dh)(),j=(0,s.bG)("input"),y=(0,s.Dh)(),G=(0,s.bG)("div"),T=(0,s.bG)("label"),T.textContent="Hours",$=(0,s.Dh)(),D=(0,s.bG)("input"),_=(0,s.Dh)(),C=(0,s.bG)("button"),C.innerHTML='<i class="fas fa-plus-circle"></i>',w=(0,s.Dh)(),x=(0,s.bG)("div"),k=(0,s.bG)("table"),S=(0,s.bG)("caption"),I=(0,s.bG)("p"),M=(0,s.fL)("Total Hours: "),Z=(0,s.fL)(X),N=(0,s.Dh)(),A=(0,s.bG)("thead"),A.innerHTML="<tr><th>Issue</th> \n            <th>Activty</th> \n            <th>Comments</th> \n            <th>Hours</th> \n            <th></th></tr>",H=(0,s.Dh)(),E=(0,s.bG)("tbody");for(let t=0;t<tt.length;t+=1)tt[t].c();(0,s.Lj)(a,"for","Issue"),u.__value="",u.value=u.__value,u.selected=!0,(0,s.Lj)(c,"class","form-control"),(0,s.Lj)(c,"name","Issue"),void 0===t[0].issue&&(0,s.P$)((()=>t[8].call(c))),(0,s.Lj)(r,"class","form-group"),(0,s.Lj)(h,"for","Issue"),p.__value="",p.value=p.__value,p.selected=!0,(0,s.Lj)(b,"class","form-control"),(0,s.Lj)(b,"name","Activity"),void 0===t[0].activity&&(0,s.P$)((()=>t[9].call(b))),(0,s.Lj)(f,"class","form-group"),(0,s.Lj)(v,"for","Comments"),(0,s.Lj)(j,"type","text"),(0,s.Lj)(j,"class","form-control"),(0,s.Lj)(j,"placeholder","Comments"),(0,s.Lj)(R,"class","form-group"),(0,s.Lj)(T,"for","Hours"),(0,s.Lj)(D,"type","number"),(0,s.Lj)(D,"min","0.0"),(0,s.Lj)(D,"max","24.0"),(0,s.Lj)(D,"step","0.5"),(0,s.Lj)(D,"class","form-control"),(0,s.Lj)(D,"placeholder","Hours"),(0,s.Lj)(G,"class","form-group"),(0,s.Lj)(C,"type","submit"),(0,s.Lj)(C,"class","btn btn-sm btn-success"),(0,s.Lj)(o,"class","col"),(0,s.Lj)(I,"class","text-info"),(0,s.Lj)(k,"class","table table-striped"),(0,s.Lj)(x,"class","col"),(0,s.Lj)(n,"class","row"),(0,s.Lj)(e,"class","container")},m(P,U){(0,s.$T)(P,e,U),(0,s.R3)(e,n),(0,s.R3)(n,o),(0,s.R3)(o,i),(0,s.R3)(i,r),(0,s.R3)(r,a),(0,s.R3)(r,l),(0,s.R3)(r,c),(0,s.R3)(c,u);for(let t=0;t<K.length;t+=1)K[t].m(c,null);(0,s.oW)(c,t[0].issue),(0,s.R3)(i,d),(0,s.R3)(i,f),(0,s.R3)(f,h),(0,s.R3)(f,m),(0,s.R3)(f,b),(0,s.R3)(b,p);for(let t=0;t<q.length;t+=1)q[t].m(b,null);(0,s.oW)(b,t[0].activity),(0,s.R3)(i,L),(0,s.R3)(i,R),(0,s.R3)(R,v),(0,s.R3)(R,g),(0,s.R3)(R,j),(0,s.Bm)(j,t[0].comments),(0,s.R3)(i,y),(0,s.R3)(i,G),(0,s.R3)(G,T),(0,s.R3)(G,$),(0,s.R3)(G,D),(0,s.Bm)(D,t[0].hours),(0,s.R3)(i,_),(0,s.R3)(i,C),(0,s.R3)(n,w),(0,s.R3)(n,x),(0,s.R3)(x,k),(0,s.R3)(k,S),(0,s.R3)(S,I),(0,s.R3)(I,M),(0,s.R3)(I,Z),(0,s.R3)(k,N),(0,s.R3)(k,A),(0,s.R3)(k,H),(0,s.R3)(k,E);for(let t=0;t<tt.length;t+=1)tt[t].m(E,null);F||(O=[(0,s.oL)(c,"change",t[8]),(0,s.oL)(b,"change",t[9]),(0,s.oL)(j,"input",t[10]),(0,s.oL)(D,"input",t[11]),(0,s.oL)(i,"submit",t[4])],F=!0)},p(t,[e]){8&e&&(nt=t[3],K=(0,s.GQ)(K,e,st,1,t,nt,J,c,s.OC,W,null,Y)),9&e&&(0,s.oW)(c,t[0].issue),4&e&&(ot=t[2],q=(0,s.GQ)(q,e,it,1,t,ot,V,b,s.OC,z,null,U)),9&e&&(0,s.oW)(b,t[0].activity),9&e&&j.value!==t[0].comments&&(0,s.Bm)(j,t[0].comments),9&e&&(0,s.sC)(D.value)!==t[0].hours&&(0,s.Bm)(D,t[0].hours),2&e&&X!==(X=t[1].reduce(Q,0)+"")&&(0,s.rT)(Z,X),226&e&&(rt=t[1],tt=(0,s.GQ)(tt,e,at,1,t,rt,et,E,s.OC,B,null,P))},i:s.ZT,o:s.ZT,d(t){t&&(0,s.og)(e);for(let t=0;t<K.length;t+=1)K[t].d();for(let t=0;t<q.length;t+=1)q[t].d();for(let t=0;t<tt.length;t+=1)tt[t].d();F=!1,(0,s.j7)(O)}}}function J(){const t=new Date;return{id:`${t.getFullYear()}${t.getMonth()}${t.getDay()}${t.getHours()}${t.getMinutes()}${t.getSeconds()}${t.getMilliseconds()}`,issue:0,activity:0,comments:"",hours:0}}const Q=(t,e)=>t+e.hours;function q(t,e,n){let i,r,l,c;(0,s.FI)(t,E,(t=>n(1,i=t))),(0,s.FI)(t,O,(t=>n(2,r=t))),(0,s.FI)(t,k,(t=>n(3,l=t))),(0,s.FI)(t,a,(t=>n(13,c=t)));var u=this&&this.__awaiter||function(t,e,n,s){return new(n||(n=Promise))((function(o,i){function r(t){try{l(s.next(t))}catch(t){i(t)}}function a(t){try{l(s.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,a)}l((s=s.apply(t,e||[])).next())}))};function d(t,e){t.preventDefault();let n=-1,s=Array.from(i);for(let t=0;t<s.length;t++){s[t].id===e&&(n=t)}n>=0&&(s.splice(n,1),E.updateTemplates(s))}let f=J();(0,o.H3)((()=>u(void 0,void 0,void 0,(function*(){if(void 0===c.unauthorized&&0===r.length){const t=yield fetch(`api/redmine/timeentryactivities?userApiKey=${c.api_key}`),e=yield t.json();O.updateActivities(e)}}))));return[f,i,r,l,function(t){t.preventDefault();let e=Array.from(i);e.push(f),E.updateTemplates(e),n(0,f=J())},d,function(t){let e="";for(let n=0;n<r.length;n++){const s=r[n];if(s.id===t){e=s.name;break}}return e},function(t){let e="";for(let n=0;n<l.length;n++){const s=l[n];if(s.id===t){e=s.subject;break}}return e},function(){f.issue=(0,s.SA)(this),n(0,f)},function(){f.activity=(0,s.SA)(this),n(0,f)},function(){f.comments=this.value,n(0,f)},function(){f.hours=(0,s.sC)(this.value),n(0,f)},(t,e)=>d(e,t.id)]}class V extends s.f_{constructor(t){super(),(0,s.S1)(this,t,q,K,s.N8,{})}}const X=V;var tt=n(3651),et=n.n(tt),nt=n(3105),st=n.n(nt),ot=n(9734),it=n.n(ot),rt=n(4135),at=n(3703),lt=n(7349);function ct(t,e,n){const s=t.slice();return s[29]=e[n],s[30]=e,s[31]=n,s}function ut(t,e,n){const s=t.slice();return s[32]=e[n],s}function dt(t,e,n){const s=t.slice();return s[35]=e[n],s}function ft(t,e,n){const s=t.slice();return s[38]=e[n],s}function ht(t){let e,n,o,i,r,a,l,c,u,d,f,h,m,b,p,L,R,v,g,j,y,G,T,$=t[38].spent_on+"",D=t[38].jornada.diaSemana+"",_=t[38].activity+"",C=t[38].comments+"",w=t[38].hours+"";function x(...e){return t[13](t[38],...e)}return{c(){e=(0,s.bG)("tr"),n=(0,s.bG)("td"),o=(0,s.fL)($),i=(0,s.Dh)(),r=(0,s.fL)(D),a=(0,s.Dh)(),l=(0,s.bG)("td"),c=(0,s.fL)(_),u=(0,s.Dh)(),d=(0,s.bG)("td"),f=(0,s.fL)(C),h=(0,s.Dh)(),m=(0,s.bG)("td"),b=(0,s.fL)(w),p=(0,s.Dh)(),L=(0,s.bG)("td"),R=(0,s.bG)("button"),v=(0,s.bG)("i"),j=(0,s.Dh)(),(0,s.Lj)(n,"class","svelte-1hus6gl"),(0,s.Lj)(l,"class","svelte-1hus6gl"),(0,s.Lj)(d,"class","svelte-1hus6gl"),(0,s.Lj)(m,"class","svelte-1hus6gl"),(0,s.Lj)(v,"class","fas fa-calendar-plus"),(0,s.Lj)(R,"type","button"),(0,s.Lj)(R,"class",g="btn btn-sm "+(t[38].id<0?"btn-success":"btn-primary")),(0,s.Lj)(R,"data-toggle","modal"),(0,s.Lj)(R,"data-target","#timeEntriesForm"),(0,s.Lj)(L,"class","svelte-1hus6gl"),(0,s.Lj)(e,"class",y=(0,s.Gu)(t[38].jornada.diaSemana.toLowerCase())+" svelte-1hus6gl")},m(t,g){(0,s.$T)(t,e,g),(0,s.R3)(e,n),(0,s.R3)(n,o),(0,s.R3)(n,i),(0,s.R3)(n,r),(0,s.R3)(e,a),(0,s.R3)(e,l),(0,s.R3)(l,c),(0,s.R3)(e,u),(0,s.R3)(e,d),(0,s.R3)(d,f),(0,s.R3)(e,h),(0,s.R3)(e,m),(0,s.R3)(m,b),(0,s.R3)(e,p),(0,s.R3)(e,L),(0,s.R3)(L,R),(0,s.R3)(R,v),(0,s.R3)(e,j),G||(T=(0,s.oL)(R,"click",x),G=!0)},p(n,i){t=n,1&i[0]&&$!==($=t[38].spent_on+"")&&(0,s.rT)(o,$),1&i[0]&&D!==(D=t[38].jornada.diaSemana+"")&&(0,s.rT)(r,D),1&i[0]&&_!==(_=t[38].activity+"")&&(0,s.rT)(c,_),1&i[0]&&C!==(C=t[38].comments+"")&&(0,s.rT)(f,C),1&i[0]&&w!==(w=t[38].hours+"")&&(0,s.rT)(b,w),1&i[0]&&g!==(g="btn btn-sm "+(t[38].id<0?"btn-success":"btn-primary"))&&(0,s.Lj)(R,"class",g),1&i[0]&&y!==(y=(0,s.Gu)(t[38].jornada.diaSemana.toLowerCase())+" svelte-1hus6gl")&&(0,s.Lj)(e,"class",y)},d(t){t&&(0,s.og)(e),G=!1,T()}}}function mt(t,e){let n,o,i,r,a,l,c=e[35].id+"",u=e[35].project.name+"";return{key:t,first:null,c(){n=(0,s.bG)("option"),o=(0,s.fL)(c),i=(0,s.Dh)(),r=(0,s.fL)(u),a=(0,s.Dh)(),n.__value=l=e[35].id,n.value=n.__value,this.first=n},m(t,e){(0,s.$T)(t,n,e),(0,s.R3)(n,o),(0,s.R3)(n,i),(0,s.R3)(n,r),(0,s.R3)(n,a)},p(t,i){e=t,16&i[0]&&c!==(c=e[35].id+"")&&(0,s.rT)(o,c),16&i[0]&&u!==(u=e[35].project.name+"")&&(0,s.rT)(r,u),16&i[0]&&l!==(l=e[35].id)&&(n.__value=l,n.value=n.__value)},d(t){t&&(0,s.og)(n)}}}function bt(t,e){let n,o,i,r=e[32].name+"";return{key:t,first:null,c(){n=(0,s.bG)("option"),o=(0,s.fL)(r),n.__value=i=e[32].id,n.value=n.__value,this.first=n},m(t,e){(0,s.$T)(t,n,e),(0,s.R3)(n,o)},p(t,a){e=t,32&a[0]&&r!==(r=e[32].name+"")&&(0,s.rT)(o,r),32&a[0]&&i!==(i=e[32].id)&&(n.__value=i,n.value=n.__value)},d(t){t&&(0,s.og)(n)}}}function pt(t){let e,n,o,i,r,a,l,c,u,d,f,h,m,b,p,L,R,v,g,j,y=[],G=new Map,T=[],$=new Map,D=t[4];const _=t=>t[35].id;for(let e=0;e<D.length;e+=1){let n=dt(t,D,e),s=_(n);G.set(s,y[e]=mt(s,n))}function C(){t[15].call(o,t[30],t[31])}let w=t[5];const x=t=>t[32].id;for(let e=0;e<w.length;e+=1){let n=ut(t,w,e),s=x(n);$.set(s,T[e]=bt(s,n))}function k(){t[16].call(l,t[30],t[31])}function S(){t[17].call(f,t[30],t[31])}function I(){t[18].call(b,t[30],t[31])}function M(...e){return t[19](t[31],...e)}return{c(){e=(0,s.bG)("tr"),n=(0,s.bG)("td"),o=(0,s.bG)("select"),i=(0,s.bG)("option"),i.textContent="--Select an issue--";for(let t=0;t<y.length;t+=1)y[t].c();r=(0,s.Dh)(),a=(0,s.bG)("td"),l=(0,s.bG)("select"),c=(0,s.bG)("option"),c.textContent="--Select an activity--";for(let t=0;t<T.length;t+=1)T[t].c();u=(0,s.Dh)(),d=(0,s.bG)("td"),f=(0,s.bG)("input"),h=(0,s.Dh)(),m=(0,s.bG)("td"),b=(0,s.bG)("input"),p=(0,s.Dh)(),L=(0,s.bG)("td"),R=(0,s.bG)("button"),R.innerHTML='<i class="fas fa-trash"></i>',v=(0,s.Dh)(),i.__value="",i.value=i.__value,i.selected=!0,(0,s.Lj)(o,"class","form-control"),(0,s.Lj)(o,"name","Issue"),void 0===t[29].issue&&(0,s.P$)(C),(0,s.Lj)(n,"class","svelte-1hus6gl"),c.__value="",c.value=c.__value,c.selected=!0,(0,s.Lj)(l,"class","form-control"),(0,s.Lj)(l,"name","Activity"),void 0===t[29].activity&&(0,s.P$)(k),(0,s.Lj)(a,"class","svelte-1hus6gl"),(0,s.Lj)(f,"type","text"),(0,s.Lj)(f,"class","form-control"),(0,s.Lj)(f,"placeholder","Comments"),(0,s.Lj)(d,"class","svelte-1hus6gl"),(0,s.Lj)(b,"type","number"),(0,s.Lj)(b,"min","0.0"),(0,s.Lj)(b,"max","24.0"),(0,s.Lj)(b,"step","0.5"),(0,s.Lj)(b,"class","form-control"),(0,s.Lj)(b,"placeholder","Hours"),(0,s.Lj)(m,"class","svelte-1hus6gl"),(0,s.Lj)(R,"type","button"),(0,s.Lj)(R,"class","btn btn-sm btn-danger"),(0,s.Lj)(L,"class","svelte-1hus6gl")},m(G,$){(0,s.$T)(G,e,$),(0,s.R3)(e,n),(0,s.R3)(n,o),(0,s.R3)(o,i);for(let t=0;t<y.length;t+=1)y[t].m(o,null);(0,s.oW)(o,t[29].issue),(0,s.R3)(e,r),(0,s.R3)(e,a),(0,s.R3)(a,l),(0,s.R3)(l,c);for(let t=0;t<T.length;t+=1)T[t].m(l,null);(0,s.oW)(l,t[29].activity),(0,s.R3)(e,u),(0,s.R3)(e,d),(0,s.R3)(d,f),(0,s.Bm)(f,t[29].comments),(0,s.R3)(e,h),(0,s.R3)(e,m),(0,s.R3)(m,b),(0,s.Bm)(b,t[29].hours),(0,s.R3)(e,p),(0,s.R3)(e,L),(0,s.R3)(L,R),(0,s.R3)(e,v),g||(j=[(0,s.oL)(o,"change",C),(0,s.oL)(l,"change",k),(0,s.oL)(f,"input",S),(0,s.oL)(b,"input",I),(0,s.oL)(R,"click",M)],g=!0)},p(e,n){t=e,16&n[0]&&(D=t[4],y=(0,s.GQ)(y,n,_,1,t,D,G,o,s.OC,mt,null,dt)),24&n[0]&&(0,s.oW)(o,t[29].issue),32&n[0]&&(w=t[5],T=(0,s.GQ)(T,n,x,1,t,w,$,l,s.OC,bt,null,ut)),24&n[0]&&(0,s.oW)(l,t[29].activity),24&n[0]&&f.value!==t[29].comments&&(0,s.Bm)(f,t[29].comments),24&n[0]&&(0,s.sC)(b.value)!==t[29].hours&&(0,s.Bm)(b,t[29].hours)},d(t){t&&(0,s.og)(e);for(let t=0;t<y.length;t+=1)y[t].d();for(let t=0;t<T.length;t+=1)T[t].d();g=!1,(0,s.j7)(j)}}}function Lt(t){let e,n,o,i,r,a,l,c,u,d,f,h,m,b,p,L,R,v,g,j,y,G,T,$,D,_,C,w,x,k,S,I,M,Z,N,A,H,E,F,O,P,U,Y,W,z,B,K,J,Q,q,V,X=t[3].turno.diaSemana+"",tt=t[3].turno.fecha+"",et=t[0],nt=[];for(let e=0;e<et.length;e+=1)nt[e]=ht(ft(t,et,e));let st=t[3].entries,ot=[];for(let e=0;e<st.length;e+=1)ot[e]=pt(ct(t,st,e));return{c(){e=(0,s.bG)("div"),n=(0,s.bG)("div"),o=(0,s.bG)("div"),i=(0,s.bG)("table"),r=(0,s.bG)("thead"),a=(0,s.bG)("tr"),l=(0,s.bG)("th"),l.textContent="Date",c=(0,s.Dh)(),u=(0,s.bG)("th"),u.textContent="Activity",d=(0,s.Dh)(),f=(0,s.bG)("th"),f.textContent="Comments",h=(0,s.Dh)(),m=(0,s.bG)("th"),m.textContent="Hours",b=(0,s.Dh)(),p=(0,s.bG)("th"),L=(0,s.bG)("div"),R=(0,s.bG)("input"),v=(0,s.Dh)(),g=(0,s.bG)("label"),g.textContent="Display Weekends",j=(0,s.Dh)(),y=(0,s.bG)("tbody");for(let t=0;t<nt.length;t+=1)nt[t].c();G=(0,s.Dh)(),T=(0,s.bG)("div"),$=(0,s.bG)("div"),D=(0,s.bG)("div"),_=(0,s.bG)("div"),C=(0,s.bG)("h5"),w=(0,s.fL)("Register Time Entries for "),x=(0,s.fL)(X),k=(0,s.Dh)(),S=(0,s.fL)(tt),I=(0,s.Dh)(),M=(0,s.bG)("button"),M.innerHTML='<span aria-hidden="true">Ã—</span>',N=(0,s.Dh)(),A=(0,s.bG)("div"),H=(0,s.bG)("table"),E=(0,s.bG)("caption"),F=(0,s.bG)("button"),F.innerHTML='<i class="fas fa-calendar-plus"></i> Add empty entry',O=(0,s.Dh)(),P=(0,s.bG)("thead"),P.innerHTML="<tr><th>Issue</th> \n                <th>Activity</th> \n                <th>Comments</th> \n                <th>Hours</th> \n                <th></th></tr>",U=(0,s.Dh)(),Y=(0,s.bG)("tbody");for(let t=0;t<ot.length;t+=1)ot[t].c();W=(0,s.Dh)(),z=(0,s.bG)("div"),B=(0,s.bG)("button"),B.textContent="Close",K=(0,s.Dh)(),J=(0,s.bG)("button"),J.textContent="Submit Time Entries",(0,s.Lj)(R,"type","checkbox"),(0,s.Lj)(R,"class","form-check-input"),(0,s.Lj)(R,"id","displayWeekends"),(0,s.Lj)(g,"class","form-check-label"),(0,s.Lj)(g,"for","displayWeekends"),(0,s.Lj)(L,"class","form-group form-check"),(0,s.Lj)(r,"class","thead-dark"),(0,s.Lj)(i,"class","table table-sm table-hover"),(0,s.Lj)(o,"class","col"),(0,s.Lj)(n,"class","row"),(0,s.Lj)(C,"class","modal-title"),(0,s.Lj)(C,"id","timeEntriesFormTitle"),(0,s.Lj)(M,"type","button"),(0,s.Lj)(M,"class","close"),(0,s.Lj)(M,"data-dismiss","modal"),(0,s.Lj)(M,"aria-label","Close"),(0,s.Lj)(_,"class",Z="modal-header "+(t[2]?"bg-warning":"")),(0,s.Lj)(F,"type","button"),(0,s.Lj)(F,"class","btn btn-sm btn-info"),(0,s.Lj)(A,"class","modal-body"),(0,s.Lj)(B,"type","button"),(0,s.Lj)(B,"class","btn btn-secondary"),(0,s.Lj)(B,"data-dismiss","modal"),(0,s.Lj)(J,"type","button"),(0,s.Lj)(J,"class","btn btn-danger"),(0,s.Lj)(J,"data-dismiss","modal"),(0,s.Lj)(z,"class","modal-footer"),(0,s.Lj)(D,"class","modal-content"),(0,s.Lj)($,"class","modal-dialog modal-lg"),(0,s.Lj)($,"role","document"),(0,s.Lj)(T,"class","modal fade"),(0,s.Lj)(T,"id","timeEntriesForm"),(0,s.Lj)(T,"tabindex",Q=-1),(0,s.Lj)(T,"role","dialog"),(0,s.Lj)(T,"aria-labelledby","timeEntriesFormTitle"),(0,s.Lj)(T,"aria-hidden","true"),(0,s.Lj)(e,"class","container")},m(Z,Q){(0,s.$T)(Z,e,Q),(0,s.R3)(e,n),(0,s.R3)(n,o),(0,s.R3)(o,i),(0,s.R3)(i,r),(0,s.R3)(r,a),(0,s.R3)(a,l),(0,s.R3)(a,c),(0,s.R3)(a,u),(0,s.R3)(a,d),(0,s.R3)(a,f),(0,s.R3)(a,h),(0,s.R3)(a,m),(0,s.R3)(a,b),(0,s.R3)(a,p),(0,s.R3)(p,L),(0,s.R3)(L,R),R.checked=t[1],(0,s.R3)(L,v),(0,s.R3)(L,g),(0,s.R3)(i,j),(0,s.R3)(i,y);for(let t=0;t<nt.length;t+=1)nt[t].m(y,null);(0,s.R3)(e,G),(0,s.R3)(e,T),(0,s.R3)(T,$),(0,s.R3)($,D),(0,s.R3)(D,_),(0,s.R3)(_,C),(0,s.R3)(C,w),(0,s.R3)(C,x),(0,s.R3)(C,k),(0,s.R3)(C,S),(0,s.R3)(_,I),(0,s.R3)(_,M),(0,s.R3)(D,N),(0,s.R3)(D,A),(0,s.R3)(A,H),(0,s.R3)(H,E),(0,s.R3)(E,F),(0,s.R3)(H,O),(0,s.R3)(H,P),(0,s.R3)(H,U),(0,s.R3)(H,Y);for(let t=0;t<ot.length;t+=1)ot[t].m(Y,null);(0,s.R3)(D,W),(0,s.R3)(D,z),(0,s.R3)(z,B),(0,s.R3)(z,K),(0,s.R3)(z,J),q||(V=[(0,s.oL)(R,"change",t[12]),(0,s.oL)(R,"change",t[6]),(0,s.oL)(M,"click",t[10]),(0,s.oL)(F,"click",t[14]),(0,s.oL)(B,"click",t[10]),(0,s.oL)(J,"click",t[20])],q=!0)},p(t,e){if(2&e[0]&&(R.checked=t[1]),129&e[0]){let n;for(et=t[0],n=0;n<et.length;n+=1){const s=ft(t,et,n);nt[n]?nt[n].p(s,e):(nt[n]=ht(s),nt[n].c(),nt[n].m(y,null))}for(;n<nt.length;n+=1)nt[n].d(1);nt.length=et.length}if(8&e[0]&&X!==(X=t[3].turno.diaSemana+"")&&(0,s.rT)(x,X),8&e[0]&&tt!==(tt=t[3].turno.fecha+"")&&(0,s.rT)(S,tt),4&e[0]&&Z!==(Z="modal-header "+(t[2]?"bg-warning":""))&&(0,s.Lj)(_,"class",Z),2104&e[0]){let n;for(st=t[3].entries,n=0;n<st.length;n+=1){const s=ct(t,st,n);ot[n]?ot[n].p(s,e):(ot[n]=pt(s),ot[n].c(),ot[n].m(Y,null))}for(;n<ot.length;n+=1)ot[n].d(1);ot.length=st.length}},i:s.ZT,o:s.ZT,d(t){t&&(0,s.og)(e),(0,s.RM)(nt,t),(0,s.RM)(ot,t),q=!1,(0,s.j7)(V)}}}function Rt(t){return{spent_on:t.fecha,issue:0,activity:0,comments:"",hours:0}}function vt(t){return{id:-1,spent_on:t.fecha,issueId:0,issue:"No Hours registered",activity:"No Hours registered",comments:"No Hours registered",hours:0,jornada:t}}function gt(t,e,n){let i,r,l,c;(0,s.FI)(t,a,(t=>n(22,i=t))),(0,s.FI)(t,E,(t=>n(23,r=t))),(0,s.FI)(t,k,(t=>n(4,l=t))),(0,s.FI)(t,O,(t=>n(5,c=t)));var u=this&&this.__awaiter||function(t,e,n,s){return new(n||(n=Promise))((function(o,i){function r(t){try{l(s.next(t))}catch(t){i(t)}}function a(t){try{l(s.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,a)}l((s=s.apply(t,e||[])).next())}))};const d=["2020-05-25","2020-07-04","2020-09-07","2020-09-16","2020-10-12","2020-11-11","2020-11-26","2020-12-25"];let f,h,m,b,p=[],L=!1;function R(){let t=[];p.forEach((e=>{const n=st()(f,{spent_on:e.fecha});!0===L&&0===n.length||0===n.length&&!1===L&&0!==e.dia&&6!==e.dia?t.push(vt(e)):n.length&&n.forEach((n=>{let s={id:n.id,spent_on:n.spent_on,issueId:n.issue.id,issue:n.issue.name,activity:n.activity.name,comments:n.comments,hours:n.hours,jornada:e};t.push(s)}))})),n(0,h=t)}function v(t,e){t.preventDefault(),n(3,b.turno=e.jornada,b);const s=et()(d,b.turno.fecha);n(2,m=0===b.turno.dia||6===b.turno.dia||s>=0),e.id>0&&0===r.length?b.entries.push(Rt(e.jornada)):r.length>0&&e.id<0?(n(3,b.entries=[],b),r.forEach((t=>{b.entries.push({spent_on:e.jornada.fecha,issue:t.issue,activity:t.activity,comments:t.comments,hours:t.hours})}))):b.entries.push(Rt(e.jornada))}function g(t){t.preventDefault();let e=Array.from(b.entries);e.push(Rt(b.turno)),n(3,b.entries=e,b)}function j(){return u(this,void 0,void 0,(function*(){let t=Array.from(f);yield function(t,e){return u(this,void 0,void 0,(function*(){for(let n=0;n<t.length;n++)yield e(t[n],n,t)}))}(b.entries,(e=>u(this,void 0,void 0,(function*(){const n=yield fetch(`api/redmine/timeentries?userApiKey=${i.api_key}`,{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}});!0===n.ok&&t.push(yield n.json())})))),f=it()(t,["spent_on","id"]),n(3,b={turno:{},entries:[]}),R()}))}function y(t,e){t.preventDefault();let s=Array.from(b.entries);s.length>1&&(s.splice(e,1),n(3,b.entries=s,b))}(0,o.H3)((()=>u(void 0,void 0,void 0,(function*(){const t=new Date;let e,n;for(t.getDate()>15?(e=new Date(t.getFullYear(),t.getMonth(),16),n=(0,rt.Z)(t)):(e=(0,at.Z)(t),n=new Date(t.getFullYear(),t.getMonth(),15));e<=n;){const t={fecha:(0,T.Z)(e,"yyyy-MM-dd"),dia:e.getDay(),diaSemana:(0,T.Z)(e,"EEE")};e=(0,lt.Z)(e,1),p.push(t)}yield function(t){return u(this,void 0,void 0,(function*(){if(t&&t.preventDefault(),void 0===i.unauthorized&&p.length){const t=p[0].fecha,e=p[p.length-1].fecha,n=yield fetch(`api/redmine/timeentries?userApiKey=${i.api_key}&userId=${i.id}&from=${t}&to=${e}`);f=it()(yield n.json(),["spent_on","id"]),R()}}))}()}))));return n(2,m=!1),n(0,h=[]),n(3,b={turno:{},entries:[]}),[h,L,m,b,l,c,R,v,g,j,function(){n(3,b={turno:{},entries:new Array})},y,function(){L=this.checked,n(1,L)},(t,e)=>v(e,t),t=>g(t),function(t,e){t[e].issue=(0,s.SA)(this),n(3,b)},function(t,e){t[e].activity=(0,s.SA)(this),n(3,b)},function(t,e){t[e].comments=this.value,n(3,b)},function(t,e){t[e].hours=(0,s.sC)(this.value),n(3,b)},(t,e)=>y(e,t),async()=>await j()]}class jt extends s.f_{constructor(t){super(),(0,s.S1)(this,t,gt,Lt,s.N8,{},[-1,-1])}}const yt=jt;var Gt=n(3303),Tt=n.n(Gt);function $t(t,e,n){const s=t.slice();return s[8]=e[n],s}function Dt(t,e,n){const s=t.slice();return s[11]=e[n],s}function _t(t,e){let n,o,i,r,a,l=e[11].project.name+"",c=e[11].spent_hours+"";return{key:t,first:null,c(){n=(0,s.bG)("h5"),o=(0,s.fL)("Total de horas para "),i=(0,s.fL)(l),r=(0,s.fL)(" : "),a=(0,s.fL)(c),this.first=n},m(t,e){(0,s.$T)(t,n,e),(0,s.R3)(n,o),(0,s.R3)(n,i),(0,s.R3)(n,r),(0,s.R3)(n,a)},p(t,n){e=t,2&n&&l!==(l=e[11].project.name+"")&&(0,s.rT)(i,l),2&n&&c!==(c=e[11].spent_hours+"")&&(0,s.rT)(a,c)},d(t){t&&(0,s.og)(n)}}}function Ct(t){let e,n,o,i,r,a,l,c,u,d,f,h,m,b=t[8].spent_on+"",p=t[8].activity.name+"",L=t[8].comments+"",R=t[8].hours+"";return{c(){e=(0,s.bG)("tr"),n=(0,s.bG)("td"),o=(0,s.fL)(b),i=(0,s.Dh)(),r=(0,s.bG)("td"),a=(0,s.fL)(p),l=(0,s.Dh)(),c=(0,s.bG)("td"),u=(0,s.fL)(L),d=(0,s.Dh)(),f=(0,s.bG)("td"),h=(0,s.fL)(R),m=(0,s.Dh)()},m(t,b){(0,s.$T)(t,e,b),(0,s.R3)(e,n),(0,s.R3)(n,o),(0,s.R3)(e,i),(0,s.R3)(e,r),(0,s.R3)(r,a),(0,s.R3)(e,l),(0,s.R3)(e,c),(0,s.R3)(c,u),(0,s.R3)(e,d),(0,s.R3)(e,f),(0,s.R3)(f,h),(0,s.R3)(e,m)},p(t,e){1&e&&b!==(b=t[8].spent_on+"")&&(0,s.rT)(o,b),1&e&&p!==(p=t[8].activity.name+"")&&(0,s.rT)(a,p),1&e&&L!==(L=t[8].comments+"")&&(0,s.rT)(u,L),1&e&&R!==(R=t[8].hours+"")&&(0,s.rT)(h,R)},d(t){t&&(0,s.og)(e)}}}function wt(t){let e,n,o,i,r,a,l,c,u,d,f=[],h=new Map,m=t[1];const b=t=>t[11].id;for(let e=0;e<m.length;e+=1){let n=Dt(t,m,e),s=b(n);h.set(s,f[e]=_t(s,n))}let p=t[0],L=[];for(let e=0;e<p.length;e+=1)L[e]=Ct($t(t,p,e));return{c(){e=(0,s.bG)("div"),n=(0,s.bG)("div"),o=(0,s.bG)("div");for(let t=0;t<f.length;t+=1)f[t].c();i=(0,s.Dh)(),r=(0,s.bG)("div"),a=(0,s.bG)("div"),l=(0,s.bG)("table"),c=(0,s.bG)("thead"),c.innerHTML="<tr><th>Date</th> \n            <th>Activity</th> \n            <th>Comments</th> \n            <th>Hours</th></tr>",u=(0,s.Dh)(),d=(0,s.bG)("tbody");for(let t=0;t<L.length;t+=1)L[t].c();(0,s.Lj)(o,"class","col"),(0,s.Lj)(n,"class","row"),(0,s.Lj)(c,"class","thead-dark"),(0,s.Lj)(l,"class","table table-sm table-hover"),(0,s.Lj)(a,"class","col"),(0,s.Lj)(r,"class","row"),(0,s.Lj)(e,"class","container")},m(t,h){(0,s.$T)(t,e,h),(0,s.R3)(e,n),(0,s.R3)(n,o);for(let t=0;t<f.length;t+=1)f[t].m(o,null);(0,s.R3)(e,i),(0,s.R3)(e,r),(0,s.R3)(r,a),(0,s.R3)(a,l),(0,s.R3)(l,c),(0,s.R3)(l,u),(0,s.R3)(l,d);for(let t=0;t<L.length;t+=1)L[t].m(d,null)},p(t,[e]){if(2&e&&(m=t[1],f=(0,s.GQ)(f,e,b,1,t,m,h,o,s.OC,_t,null,Dt)),1&e){let n;for(p=t[0],n=0;n<p.length;n+=1){const s=$t(t,p,n);L[n]?L[n].p(s,e):(L[n]=Ct(s),L[n].c(),L[n].m(d,null))}for(;n<L.length;n+=1)L[n].d(1);L.length=p.length}},i:s.ZT,o:s.ZT,d(t){t&&(0,s.og)(e);for(let t=0;t<f.length;t+=1)f[t].d();(0,s.RM)(L,t)}}}function xt(t,e,n){let i,r;(0,s.FI)(t,k,(t=>n(2,i=t))),(0,s.FI)(t,a,(t=>n(3,r=t)));var l=this&&this.__awaiter||function(t,e,n,s){return new(n||(n=Promise))((function(o,i){function r(t){try{l(s.next(t))}catch(t){i(t)}}function a(t){try{l(s.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,a)}l((s=s.apply(t,e||[])).next())}))};let c,u=[],d=i;return(0,o.H3)((()=>l(void 0,void 0,void 0,(function*(){const t=new Date;let e,s;for(t.getDate()>15?(e=new Date(t.getFullYear(),t.getMonth(),16),s=(0,rt.Z)(t)):(e=(0,at.Z)(t),s=new Date(t.getFullYear(),t.getMonth(),15));e<=s;){const t={fecha:(0,T.Z)(e,"yyyy-MM-dd"),dia:e.getDay(),diaSemana:(0,T.Z)(e,"dddd")};e=(0,lt.Z)(e,1),u.push(t)}let o=yield function(t){return l(this,void 0,void 0,(function*(){let e=[];if(t&&t.preventDefault(),void 0===r.unauthorized&&u.length){const t=u[0].fecha,n=u[u.length-1].fecha,s=yield fetch(`api/redmine/timeentries?userApiKey=${r.api_key}&userId=${r.id}&from=${t}&to=${n}`);e=it()(yield s.json(),["spent_on","id"])}return e}))}();!function(t){let e=d;for(let n=0;n<e.length;n++){const s=st()(t,(t=>t.issue.id===e[n].id));e[n].spent_hours=Tt()(s,"hours")}n(1,d=e)}(o),n(0,c=o)})))),n(0,c=[]),[c,d]}class kt extends s.f_{constructor(t){super(),(0,s.S1)(this,t,xt,wt,s.N8,{})}}const St=kt;function It(t){let e,n;return e=new v({}),{c(){(0,s.YC)(e.$$.fragment)},m(t,o){(0,s.ye)(e,t,o),n=!0},p:s.ZT,i(t){n||((0,s.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,s.et)(e.$$.fragment,t),n=!1},d(t){(0,s.vp)(e,t)}}}function Mt(t){let e,n;return e=new St({}),{c(){(0,s.YC)(e.$$.fragment)},m(t,o){(0,s.ye)(e,t,o),n=!0},p:s.ZT,i(t){n||((0,s.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,s.et)(e.$$.fragment,t),n=!1},d(t){(0,s.vp)(e,t)}}}function Zt(t){let e,n;return e=new yt({}),{c(){(0,s.YC)(e.$$.fragment)},m(t,o){(0,s.ye)(e,t,o),n=!0},p:s.ZT,i(t){n||((0,s.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,s.et)(e.$$.fragment,t),n=!1},d(t){(0,s.vp)(e,t)}}}function Nt(t){let e,n;return e=new X({}),{c(){(0,s.YC)(e.$$.fragment)},m(t,o){(0,s.ye)(e,t,o),n=!0},p:s.ZT,i(t){n||((0,s.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,s.et)(e.$$.fragment,t),n=!1},d(t){(0,s.vp)(e,t)}}}function At(t){let e,n;return e=new A({}),{c(){(0,s.YC)(e.$$.fragment)},m(t,o){(0,s.ye)(e,t,o),n=!0},p:s.ZT,i(t){n||((0,s.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,s.et)(e.$$.fragment,t),n=!1},d(t){(0,s.vp)(e,t)}}}function Ht(t){let e,n;return e=new w({}),{c(){(0,s.YC)(e.$$.fragment)},m(t,o){(0,s.ye)(e,t,o),n=!0},p:s.ZT,i(t){n||((0,s.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,s.et)(e.$$.fragment,t),n=!1},d(t){(0,s.vp)(e,t)}}}function Et(t){let e,n;return e=new G({props:{handleNavigation:t[2]}}),{c(){(0,s.YC)(e.$$.fragment)},m(t,o){(0,s.ye)(e,t,o),n=!0},p:s.ZT,i(t){n||((0,s.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,s.et)(e.$$.fragment,t),n=!1},d(t){(0,s.vp)(e,t)}}}function Ft(t){let e,n;return e=new v({}),{c(){(0,s.YC)(e.$$.fragment)},m(t,o){(0,s.ye)(e,t,o),n=!0},p:s.ZT,i(t){n||((0,s.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,s.et)(e.$$.fragment,t),n=!1},d(t){(0,s.vp)(e,t)}}}function Ot(t){let e,n,o,i,r,a;e=new h({props:{handleNavigation:t[2]}});const l=[Ft,Et,Ht,At,Nt,Zt,Mt,It],c=[];function u(t,e){return"/"===t[0]?0:"/login"===t[0]&&!0===t[1].unauthorized?1:"/profile"===t[0]&&void 0===t[1].unauthorized?2:"/issues"===t[0]&&void 0===t[1].unauthorized?3:"/templates"===t[0]&&void 0===t[1].unauthorized?4:"/timeentries"===t[0]&&void 0===t[1].unauthorized?5:"/report"===t[0]&&void 0===t[1].unauthorized?6:7}return o=u(t),i=c[o]=l[o](t),{c(){(0,s.YC)(e.$$.fragment),n=(0,s.Dh)(),i.c(),r=(0,s.cS)()},m(t,i){(0,s.ye)(e,t,i),(0,s.$T)(t,n,i),c[o].m(t,i),(0,s.$T)(t,r,i),a=!0},p(t,[e]){let n=o;o=u(t),o===n?c[o].p(t,e):((0,s.dv)(),(0,s.et)(c[n],1,1,(()=>{c[n]=null})),(0,s.gb)(),i=c[o],i?i.p(t,e):(i=c[o]=l[o](t),i.c()),(0,s.Ui)(i,1),i.m(r.parentNode,r))},i(t){a||((0,s.Ui)(e.$$.fragment,t),(0,s.Ui)(i),a=!0)},o(t){(0,s.et)(e.$$.fragment,t),(0,s.et)(i),a=!1},d(t){(0,s.vp)(e,t),t&&(0,s.og)(n),c[o].d(t),t&&(0,s.og)(r)}}}function Pt(t,e,n){let i,r;function l(t,e){t&&t.preventDefault(),window.history.replaceState(null,function(t){let e;switch(t){case"/login":e="Login";break;case"/profile":e="Profile";break;case"/issues":e="Issues";break;case"/templates":e="Templates";break;case"/timeentries":e="Time Entries";break;case"/report":e="Time Card";break;default:e="Index"}return e}(e),e),n(0,r=e)}return(0,s.FI)(t,a,(t=>n(1,i=t))),(0,o.H3)((()=>{l(null,window.location.pathname)})),n(0,r="/"),[r,i,l]}class Ut extends s.f_{constructor(t){super(),(0,s.S1)(this,t,Pt,Ot,s.N8,{})}}new Ut({target:document.body})}},0,[[8949,303,222]]]);
//# sourceMappingURL=main.js.map?t=b1dd0f05